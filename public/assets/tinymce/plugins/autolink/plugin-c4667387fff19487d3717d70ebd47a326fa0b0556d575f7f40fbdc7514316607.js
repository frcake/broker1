!function(){var n={},e=function(e){for(var t=n[e],o=t.deps,r=t.defn,f=o.length,d=new Array(f),a=0;a<f;++a)d[a]=i(o[a]);var s=r.apply(null,d);if(void 0===s)throw"module ["+e+"] returned undefined";t.instance=s},t=function(e,t,i){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===i)throw"no definition function for "+e;n[e]={deps:t,defn:i,instance:void 0}},i=function(t){var i=n[t];if(void 0===i)throw"module ["+t+"] was undefined";return void 0===i.instance&&e(t),i.instance},o=function(n,e){for(var t=n.length,o=new Array(t),r=0;r<t;++r)o.push(i(n[r]));e.apply(null,e)};({}).bolt={module:{api:{define:t,require:o,demand:i}}};var r=t;(function(n,e){r(n,[],function(){return e})})("3",tinymce.util.Tools.resolve),r("1",["3"],function(n){return n("tinymce.Env")}),r("2",["3"],function(n){return n("tinymce.PluginManager")}),r("0",["1","2"],function(n,e){return e.add("autolink",function(e){function t(n){r(n,-1,"(",!0)}function i(n){r(n,0,"",!0)}function o(n){r(n,-1,"",!1)}function r(n,e,t){function i(n,e){if(e<0&&(e=0),3==n.nodeType){var t=n.data.length;e>t&&(e=t)}return e}function o(n,e){1!=n.nodeType||n.hasChildNodes()?f.setStart(n,i(n,e)):f.setStartBefore(n)}function r(n,e){1!=n.nodeType||n.hasChildNodes()?f.setEnd(n,i(n,e)):f.setEndAfter(n)}var f,a,s,u,l,c,g,h,p,m;if("A"!=n.selection.getNode().tagName){if(f=n.selection.getRng(!0).cloneRange(),f.startOffset<5){if(!(h=f.endContainer.previousSibling)){if(!f.endContainer.firstChild||!f.endContainer.firstChild.nextSibling)return;h=f.endContainer.firstChild.nextSibling}if(p=h.length,o(h,p),r(h,p),f.endOffset<5)return;a=f.endOffset,u=h}else{if(u=f.endContainer,3!=u.nodeType&&u.firstChild){for(;3!=u.nodeType&&u.firstChild;)u=u.firstChild;3==u.nodeType&&(o(u,0),r(u,u.nodeValue.length))}a=1==f.endOffset?2:f.endOffset-1-e}s=a;do{o(u,a>=2?a-2:0),r(u,a>=1?a-1:0),a-=1,m=f.toString()}while(" "!=m&&""!==m&&160!=m.charCodeAt(0)&&a-2>=0&&m!=t);f.toString()==t||160==f.toString().charCodeAt(0)?(o(u,a),r(u,s),a+=1):0===f.startOffset?(o(u,0),r(u,s)):(o(u,a),r(u,s)),c=f.toString(),"."==c.charAt(c.length-1)&&r(u,s-1),c=f.toString(),(g=c.match(d))&&("www."==g[1]?g[1]="http://www.":/@$/.test(g[1])&&!/^mailto:/.test(g[1])&&(g[1]="mailto:"+g[1]),l=n.selection.getBookmark(),n.selection.setRng(f),n.execCommand("createlink",!1,g[1]+g[2]),n.settings.default_link_target&&n.dom.setAttrib(n.selection.getNode(),"target",n.settings.default_link_target),n.selection.moveToBookmark(l),n.nodeChanged())}}var f,d=/^(https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.|(?:mailto:)?[A-Z0-9._%+\-]+@)(.+)$/i;return e.settings.autolink_pattern&&(d=e.settings.autolink_pattern),e.on("keydown",function(n){if(13==n.keyCode)return o(e)}),n.ie?void e.on("focus",function(){if(!f){f=!0;try{e.execCommand("AutoUrlDetect",!1,!0)}catch(n){}}}):(e.on("keypress",function(n){if(41==n.keyCode)return t(e)}),void e.on("keyup",function(n){if(32==n.keyCode)return i(e)}))}),function(){}}),i("0")()}();