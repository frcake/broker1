!function(){var n={},e=function(e){for(var t=n[e],r=t.deps,i=t.defn,a=r.length,d=new Array(a),c=0;c<a;++c)d[c]=o(r[c]);var u=i.apply(null,d);if(void 0===u)throw"module ["+e+"] returned undefined";t.instance=u},t=function(e,t,o){if("string"!=typeof e)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+e;if(void 0===o)throw"no definition function for "+e;n[e]={deps:t,defn:o,instance:void 0}},o=function(t){var o=n[t];if(void 0===o)throw"module ["+t+"] was undefined";return void 0===o.instance&&e(t),o.instance},r=function(n,e){for(var t=n.length,r=new Array(t),i=0;i<t;++i)r.push(o(n[i]));e.apply(null,e)};({}).bolt={module:{api:{define:t,require:r,demand:o}}};var i=t;(function(n,e){i(n,[],function(){return e})})("3",tinymce.util.Tools.resolve),i("1",["3"],function(n){return n("tinymce.Env")}),i("2",["3"],function(n){return n("tinymce.PluginManager")}),i("0",["1","2"],function(n,e){return e.add("anchor",function(e){var t=function(n){return!n.attr("href")&&(n.attr("id")||n.attr("name"))&&!n.firstChild},o=function(n){return function(e){for(var o=0;o<e.length;o++)t(e[o])&&e[o].attr("contenteditable",n)}},r=function(n){return/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(n)},i=function(){var n=e.selection.getNode(),t="A"==n.tagName&&""===e.dom.getAttrib(n,"href"),o="";t&&(o=n.id||n.name||""),e.windowManager.open({title:"Anchor",body:{type:"textbox",name:"id",size:40,label:"Id",value:o},onsubmit:function(o){var i=o.data.id;return r(i)?void(t?(n.removeAttribute("name"),n.id=i):(e.selection.collapse(!0),e.execCommand("mceInsertContent",!1,e.dom.createHTML("a",{id:i})))):(o.preventDefault(),void e.windowManager.alert("Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."))}})};n.ceFalse&&e.on("PreInit",function(){e.parser.addNodeFilter("a",o("false")),e.serializer.addNodeFilter("a",o(null))}),e.addCommand("mceAnchor",i),e.addButton("anchor",{icon:"anchor",tooltip:"Anchor",onclick:i,stateSelector:"a:not([href])"}),e.addMenuItem("anchor",{icon:"anchor",text:"Anchor",context:"insert",onclick:i})}),function(){}}),o("0")()}();