!function(){var e={},n=function(n){for(var t=e[n],r=t.deps,o=t.defn,i=r.length,c=new Array(i),d=0;d<i;++d)c[d]=a(r[d]);var u=o.apply(null,c);if(void 0===u)throw"module ["+n+"] returned undefined";t.instance=u},t=function(n,t,a){if("string"!=typeof n)throw"module id must be a string";if(void 0===t)throw"no dependencies for "+n;if(void 0===a)throw"no definition function for "+n;e[n]={deps:t,defn:a,instance:void 0}},a=function(t){var a=e[t];if(void 0===a)throw"module ["+t+"] was undefined";return void 0===a.instance&&n(t),a.instance},r=function(e,n){for(var t=e.length,r=new Array(t),o=0;o<t;++o)r.push(a(e[o]));n.apply(null,n)};({}).bolt={module:{api:{define:t,require:r,demand:a}}};var o=t;(function(e,n){o(e,[],function(){return n})})("3",tinymce.util.Tools.resolve),o("1",["3"],function(e){return e("tinymce.PluginManager")}),o("2",["3"],function(e){return e("tinymce.Env")}),o("0",["1","2"],function(e,n){return e.add("pagebreak",function(e){var t="mce-pagebreak",a=e.getParam("pagebreak_separator","<!-- pagebreak -->"),r=new RegExp(a.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,function(e){return"\\"+e}),"gi"),o='<img src="'+n.transparentSrc+'" class="'+t+'" data-mce-resize="false" data-mce-placeholder />';e.addCommand("mcePageBreak",function(){e.settings.pagebreak_split_block?e.insertContent("<p>"+o+"</p>"):e.insertContent(o)}),e.addButton("pagebreak",{title:"Page break",cmd:"mcePageBreak"}),e.addMenuItem("pagebreak",{text:"Page break",icon:"pagebreak",cmd:"mcePageBreak",context:"insert"}),e.on("ResolveName",function(n){"IMG"==n.target.nodeName&&e.dom.hasClass(n.target,t)&&(n.name="pagebreak")}),e.on("click",function(n){n=n.target,"IMG"===n.nodeName&&e.dom.hasClass(n,t)&&e.selection.select(n)}),e.on("BeforeSetContent",function(e){e.content=e.content.replace(r,o)}),e.on("PreInit",function(){e.serializer.addNodeFilter("img",function(n){for(var t,r,o=n.length;o--;)if(t=n[o],(r=t.attr("class"))&&-1!==r.indexOf("mce-pagebreak")){var i=t.parent;if(e.schema.getBlockElements()[i.name]&&e.settings.pagebreak_split_block){i.type=3,i.value=a,i.raw=!0,t.remove();continue}t.type=3,t.value=a,t.raw=!0}})})}),function(){}}),a("0")()}();