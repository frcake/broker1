!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,s=i.length,c=new Array(s),u=0;u<s;++u)c[u]=r(i[u]);var f=o.apply(null,c);if(void 0===f)throw"module ["+t+"] returned undefined";n.instance=f},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:i,demand:r}}};var o=n;(function(e,t){o(e,[],function(){return t})})("6",tinymce.util.Tools.resolve),o("1",["6"],function(e){return e("tinymce.EditorManager")}),o("2",["6"],function(e){return e("tinymce.dom.DOMUtils")}),o("3",["6"],function(e){return e("tinymce.Env")}),o("4",["6"],function(e){return e("tinymce.PluginManager")}),o("5",["6"],function(e){return e("tinymce.util.Tools")}),o("0",["1","2","3","4","5"],function(e,t,n,r,i){return r.add("importcss",function(r){function o(e){var t=n.cacheSuffix;return"string"==typeof e&&(e=e.replace("?"+t,"").replace("&"+t,"")),e}function s(t){var n=r.settings,i=!1!==n.skin&&(n.skin||"lightgray");if(i){var o=n.skin_url;return o=o?r.documentBaseURI.toAbsolute(o):e.baseURL+"/skins/"+i,t===o+"/content"+(r.inline?".inline":"")+".min.css"}return!1}function c(e){return"string"==typeof e?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e}function u(e,t){function n(e,r){var u,f=e.href;if((f=o(f))&&t(f,r)&&!s(f)){h(e.imports,function(e){n(e,!0)});try{u=e.cssRules||e.rules}catch(e){}h(u,function(e){e.styleSheet?n(e.styleSheet,!0):e.selectorText&&h(e.selectorText.split(","),function(e){c.push(i.trim(e))})})}}var c=[],u={};h(r.contentCSS,function(e){u[e]=!0}),t||(t=function(e,t){return t||u[e]});try{h(e.styleSheets,function(e){n(e)})}catch(e){}return c}function f(e){var t,n=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(e);if(n){var o=n[1],s=n[2].substr(1).split(".").join(" "),c=i.makeMap("a,img");return n[1]?(t={title:e},r.schema.getTextBlockElements()[o]?t.block=o:r.schema.getBlockElements()[o]||c[o.toLowerCase()]?t.selector=o:t.inline=o):n[2]&&(t={inline:"span",title:e.substr(1),classes:s}),!1!==r.settings.importcss_merge_classes?t.classes=s:t.attributes={"class":s},t}}function l(e,t){return i.grep(e,function(e){return!e.filter||e.filter(t)})}function a(e){return i.map(e,function(e){return i.extend({},e,{original:e,selectors:{},filter:c(e.filter),item:{text:e.title,menu:[]}})})}function m(e,t){return null===t||!1!==e.settings.importcss_exclusive}function d(e,t,n){return!(m(r,t)?e in n:e in t.selectors)}function p(e,t,n){m(r,t)?n[e]=!0:t.selectors[e]=!0}function v(e,t,n){var i,o=r.settings;return i=n&&n.selector_converter?n.selector_converter:o.importcss_selector_converter?o.importcss_selector_converter:f,i.call(e,t,n)}var g=this,h=i.each;r.on("renderFormatsMenu",function(e){var n=r.settings,o={},s=c(n.importcss_selector_filter),f=e.control,m=a(n.importcss_groups),y=function(e,n){if(d(e,n,o)){p(e,n,o);var s=v(g,e,n);if(s){var c=s.name||t.DOM.uniqueId();return r.formatter.register(c,s),i.extend({},f.settings.itemDefaults,{text:s.title,format:c})}}return null};r.settings.importcss_append||f.items().remove(),h(u(e.doc||r.getDoc(),c(n.importcss_file_filter)),function(e){if(-1===e.indexOf(".mce-")&&(!s||s(e))){var t=l(m,e);if(t.length>0)i.each(t,function(t){var n=y(e,t);n&&t.item.menu.push(n)});else{var n=y(e,null);n&&f.add(n)}}}),h(m,function(e){e.item.menu.length>0&&f.add(e.item)}),e.control.renderNew()}),g.convertSelectorToFormat=f}),function(){}}),r("0")()}();