!function(){var e={},t=function(t){for(var n=e[t],i=n.deps,o=n.defn,a=i.length,s=new Array(a),d=0;d<a;++d)s[d]=r(i[d]);var l=o.apply(null,s);if(void 0===l)throw"module ["+t+"] returned undefined";n.instance=l},n=function(t,n,r){if("string"!=typeof t)throw"module id must be a string";if(void 0===n)throw"no dependencies for "+t;if(void 0===r)throw"no definition function for "+t;e[t]={deps:n,defn:r,instance:void 0}},r=function(n){var r=e[n];if(void 0===r)throw"module ["+n+"] was undefined";return void 0===r.instance&&t(n),r.instance},i=function(e,t){for(var n=e.length,i=new Array(n),o=0;o<n;++o)i.push(r(e[o]));t.apply(null,t)};({}).bolt={module:{api:{define:n,require:i,demand:r}}};var o=n;(function(e,t){o(e,[],function(){return t})})("9",tinymce.util.Tools.resolve),o("1",["9"],function(e){return e("tinymce.PluginManager")}),o("2",["9"],function(e){return e("tinymce.util.Tools")}),o("3",["9"],function(e){return e("tinymce.util.VK")}),o("a",["9"],function(e){return e("tinymce.dom.DOMUtils")}),o("8",[],function(){var e=function(e){return e&&3===e.nodeType},t=function(e){return e&&/^(OL|UL|DL)$/.test(e.nodeName)},n=function(e){return e&&/^(LI|DT|DD)$/.test(e.nodeName)},r=function(e){return e&&"BR"===e.nodeName};return{isTextNode:e,isListNode:t,isListItemNode:n,isBr:r,isFirstChild:function(e){return e.parentNode.firstChild===e},isLastChild:function(e){return e.parentNode.lastChild===e},isTextBlock:function(e,t){return t&&!!e.schema.getTextBlockElements()[t.nodeName]},isBogusBr:function(e,t){return!!r(t)&&!(!e.isBlock(t.nextSibling)||r(t.previousSibling))},isEmpty:function(e,t,n){var r=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&r},isChildOfBody:function(e,t){return e.isChildOf(t,e.getRoot())}}}),o("h",["9"],function(e){return e("tinymce.dom.RangeUtils")}),o("j",["h","8"],function(e,t){var n=function(n,r){var i=e.getNode(n,r);return t.isListItemNode(n)&&t.isTextNode(i)?{container:i,offset:r>=n.childNodes.length?i.data.length:0}:{container:n,offset:r}};return{getNormalizedEndPoint:n,normalizeRange:function(e){var t=e.cloneRange(),r=n(e.startContainer,e.startOffset);t.setStart(r.container,r.offset);var i=n(e.endContainer,e.endOffset);return t.setEnd(i.container,i.offset),t}}}),o("b",["a","8","j"],function(e,t,n){var r=e.DOM,i=function(e){var t={},n=function(n){var i,o,a;o=e[n?"startContainer":"endContainer"],a=e[n?"startOffset":"endOffset"],1===o.nodeType&&(i=r.create("span",{"data-mce-type":"bookmark"}),o.hasChildNodes()?(a=Math.min(a,o.childNodes.length-1),n?o.insertBefore(i,o.childNodes[a]):r.insertAfter(i,o.childNodes[a])):o.appendChild(i),o=i,a=0),t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=a};return n(!0),e.collapsed||n(),t},o=function(e){function t(t){var n,i,o,a=function(e){for(var t=e.parentNode.firstChild,n=0;t;){if(t===e)return n;1===t.nodeType&&"bookmark"===t.getAttribute("data-mce-type")||n++,t=t.nextSibling}return-1};n=o=e[t?"startContainer":"endContainer"],i=e[t?"startOffset":"endOffset"],n&&(1===n.nodeType&&(i=a(n),n=n.parentNode,r.remove(o)),e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=i)}t(!0),t();var i=r.createRng();return i.setStart(e.startContainer,e.startOffset),e.endContainer&&i.setEnd(e.endContainer,e.endOffset),n.normalizeRange(i)};return{createBookmark:i,resolveBookmark:o}}),o("c",["2","8"],function(e,t){return{getSelectedListItems:function(n){return e.grep(n.selection.getSelectedBlocks(),function(e){return t.isListItemNode(e)})}}}),o("4",["a","b","8","c"],function(e,t,n,r){var i=e.DOM,o=function(e,t){var r;if(n.isListNode(e)){for(;r=e.firstChild;)t.appendChild(r);i.remove(e)}},a=function(e){var t,r,a;return"DT"===e.nodeName?(i.rename(e,"DD"),!0):(t=e.previousSibling,t&&n.isListNode(t)?(t.appendChild(e),!0):t&&"LI"===t.nodeName&&n.isListNode(t.lastChild)?(t.lastChild.appendChild(e),o(e.lastChild,t.lastChild),!0):(t=e.nextSibling,t&&n.isListNode(t)?(t.insertBefore(e,t.firstChild),!0):!(!(t=e.previousSibling)||"LI"!==t.nodeName||(r=i.create(e.parentNode.nodeName),a=i.getStyle(e.parentNode,"listStyleType"),a&&i.setStyle(r,"listStyleType",a),t.appendChild(r),r.appendChild(e),o(e.lastChild,r),0))))};return{indentSelection:function(e){var n=r.getSelectedListItems(e);if(n.length){for(var i=t.createBookmark(e.selection.getRng(!0)),o=0;o<n.length&&(a(n[o])||0!==o);o++);return e.selection.setRng(t.resolveBookmark(i)),e.nodeChanged(),!0}}}}),o("d",["a","2","8"],function(e,t,n){var r=e.DOM,i=function(e,t){var i,o=t.parentNode;"LI"===o.nodeName&&o.firstChild===t&&(i=o.previousSibling,i&&"LI"===i.nodeName?(i.appendChild(t),n.isEmpty(e,o)&&r.remove(o)):r.setStyle(o,"listStyleType","none")),n.isListNode(o)&&(i=o.previousSibling)&&"LI"===i.nodeName&&i.appendChild(t)};return{normalizeList:i,normalizeLists:function(e,n){t.each(t.grep(e.select("ol,ul",n)),function(t){i(e,t)})}}}),o("k",["9"],function(e){return e("tinymce.Env")}),o("f",["a","k"],function(e,t){var n=e.DOM;return{createNewTextBlock:function(e,r,i){var o,a,s,d=n.createFragment(),l=e.schema.getBlockElements();if(e.settings.forced_root_block&&(i=i||e.settings.forced_root_block),i&&(a=n.create(i),a.tagName===e.settings.forced_root_block&&n.setAttribs(a,e.settings.forced_root_block_attrs),d.appendChild(a)),r)for(;o=r.firstChild;){var c=o.nodeName;s||"SPAN"===c&&"bookmark"===o.getAttribute("data-mce-type")||(s=!0),l[c]?(d.appendChild(o),a=null):i?(a||(a=n.create(i),d.appendChild(a)),a.appendChild(o)):d.appendChild(o)}return e.settings.forced_root_block?s||t.ie&&!(t.ie>10)||a.appendChild(n.create("br",{"data-mce-bogus":"1"})):d.appendChild(n.create("br")),d}}}),o("e",["a","8","f","2"],function(e,t,n,r){var i=e.DOM;return{splitList:function(e,o,a,s){var d,l,c,f,u=function(e){r.each(c,function(t){e.parentNode.insertBefore(t,a.parentNode)}),i.remove(e)};for(c=i.select('span[data-mce-type="bookmark"]',o),s=s||n.createNewTextBlock(e,a),d=i.createRng(),d.setStartAfter(a),d.setEndAfter(o),l=d.extractContents(),f=l.firstChild;f;f=f.firstChild)if("LI"===f.nodeName&&e.dom.isEmpty(f)){i.remove(f);break}e.dom.isEmpty(l)||i.insertAfter(l,o),i.insertAfter(s,o),t.isEmpty(e.dom,a.parentNode)&&u(a.parentNode),i.remove(a),t.isEmpty(e.dom,o)&&i.remove(o)}}}),o("5",["a","b","8","d","c","e","f"],function(e,t,n,r,i,o,a){var s=e.DOM,d=function(e,t){n.isEmpty(e,t)&&s.remove(t)},l=function(e,t){var i,l=t.parentNode,c=l.parentNode;return!(l!==e.getBody()&&("DD"===t.nodeName?(s.rename(t,"DT"),0):n.isFirstChild(t)&&n.isLastChild(t)?("LI"===c.nodeName?(s.insertAfter(t,c),d(e.dom,c),s.remove(l)):n.isListNode(c)?s.remove(l,!0):(c.insertBefore(a.createNewTextBlock(e,t),l),s.remove(l)),0):n.isFirstChild(t)?("LI"===c.nodeName?(s.insertAfter(t,c),t.appendChild(l),d(e.dom,c)):n.isListNode(c)?c.insertBefore(t,l):(c.insertBefore(a.createNewTextBlock(e,t),l),s.remove(t)),0):n.isLastChild(t)?("LI"===c.nodeName?s.insertAfter(t,c):n.isListNode(c)?s.insertAfter(t,l):(s.insertAfter(a.createNewTextBlock(e,t),l),s.remove(t)),0):("LI"===c.nodeName?(l=c,i=a.createNewTextBlock(e,t,"LI")):i=n.isListNode(c)?a.createNewTextBlock(e,t,"LI"):a.createNewTextBlock(e,t),o.splitList(e,l,t,i),r.normalizeLists(e.dom,l.parentNode),0)))};return{outdent:l,outdentSelection:function(e){var n=i.getSelectedListItems(e);if(n.length){var r,o,a=t.createBookmark(e.selection.getRng(!0)),s=e.getBody();for(r=n.length;r--;)for(var d=n[r].parentNode;d&&d!==s;){for(o=n.length;o--;)if(n[o]===d){n.splice(r,1);break}d=d.parentNode}for(r=0;r<n.length&&(l(e,n[r])||0!==r);r++);return e.selection.setRng(t.resolveBookmark(a)),e.nodeChanged(),!0}}}}),o("g",["9"],function(e){return e("tinymce.dom.BookmarkManager")}),o("6",["g","2","5","b","8","d","c","e"],function(e,t,n,r,i,o,a,s){var d=function(e,t,n){var r=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",r)},l=function(e,n){t.each(n,function(t,n){e.setAttribute(n,t)})},c=function(e,n,r){l(n,r["list-attributes"]),t.each(e.select("li",n),function(e){l(e,r["list-item-attributes"])})},f=function(e,t,n){d(e,t,n),c(e,t,n)},u=function(e,t,n){var r,o,a=e.getBody();for(r=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1===r.nodeType&&(r=r.childNodes[Math.min(o,r.childNodes.length-1)]||r);r.parentNode!==a;){if(i.isTextBlock(e,r))return r;if(/^(TD|TH)$/.test(r.parentNode.nodeName))return r;r=r.parentNode}return r},m=function(n,r){for(var o,a=[],s=n.getBody(),d=n.dom,l=u(n,r,!0),c=u(n,r,!1),f=[],m=l;m&&(f.push(m),m!==c);m=m.nextSibling);return t.each(f,function(t){if(i.isTextBlock(n,t))return a.push(t),void(o=null);if(d.isBlock(t)||i.isBr(t))return i.isBr(t)&&d.remove(t),void(o=null);var r=t.nextSibling;return e.isBookmarkNode(t)&&(i.isTextBlock(n,r)||!r&&t.parentNode===s)?void(o=null):(o||(o=d.create("p"),t.parentNode.insertBefore(o,t),a.push(o)),void o.appendChild(t))}),a},p=function(e,n,o){var a,s=e.selection.getRng(!0),d="LI",l=e.dom;o=o||{},"false"!==l.getContentEditable(e.selection.getNode())&&(n=n.toUpperCase(),"DL"===n&&(d="DT"),a=r.createBookmark(s),t.each(m(e,s),function(t){var r,a,s=function(e){var t=l.getStyle(e,"list-style-type"),n=o?o["list-style-type"]:"";return n=null===n?"":n,t===n};a=t.previousSibling,a&&i.isListNode(a)&&a.nodeName===n&&s(a)?(r=a,t=l.rename(t,d),a.appendChild(t)):(r=l.create(n),t.parentNode.insertBefore(r,t),r.appendChild(t),t=l.rename(t,d)),f(l,r,o),C(e.dom,r)}),e.selection.setRng(r.resolveBookmark(a)))},g=function(e){var d=r.createBookmark(e.selection.getRng(!0)),l=e.getBody(),c=a.getSelectedListItems(e),f=t.grep(c,function(t){return e.dom.isEmpty(t)});c=t.grep(c,function(t){return!e.dom.isEmpty(t)}),t.each(f,function(t){if(i.isEmpty(e.dom,t))return void n.outdent(e,t)}),t.each(c,function(t){var n,r;if(t.parentNode!==e.getBody()){for(n=t;n&&n!==l;n=n.parentNode)i.isListNode(n)&&(r=n);s.splitList(e,r,t),o.normalizeLists(e.dom,r.parentNode)}}),e.selection.setRng(r.resolveBookmark(d))},v=function(e,t){return e&&t&&i.isListNode(e)&&e.nodeName===t.nodeName},h=function(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)},N=function(e,t){return e.className===t.className},y=function(e,t,n){return v(t,n)&&h(e,t,n)&&N(t,n)},C=function(e,t){var n,r;if(n=t.nextSibling,y(e,t,n)){for(;r=n.firstChild;)t.appendChild(r);e.remove(n)}if(n=t.previousSibling,y(e,t,n)){for(;r=n.lastChild;)t.insertBefore(r,t.firstChild);e.remove(n)}};return{toggleList:function(e,t,n){var i=e.dom.getParent(e.selection.getStart(),"OL,UL,DL");if(n=n||{},i!==e.getBody())if(i)if(i.nodeName===t)g(e,t);else{var o=r.createBookmark(e.selection.getRng(!0));f(e.dom,i,n),C(e.dom,e.dom.rename(i,t)),e.selection.setRng(r.resolveBookmark(o))}else p(e,t,n)},removeList:g,mergeWithAdjacentLists:C}}),o("i",["9"],function(e){return e("tinymce.dom.TreeWalker")}),o("7",["h","i","3","6","b","8","d","j","c"],function(e,t,n,r,i,o,a,s,d){var l=function(n,r,i){var a,s,d=r.startContainer,l=r.startOffset;if(3===d.nodeType&&(i?l<d.data.length:l>0))return d;for(a=n.schema.getNonEmptyElements(),1===d.nodeType&&(d=e.getNode(d,l)),s=new t(d,n.getBody()),i&&o.isBogusBr(n.dom,d)&&s.next();d=s[i?"next":"prev2"]();){if("LI"===d.nodeName&&!d.hasChildNodes())return d;if(a[d.nodeName])return d;if(3===d.nodeType&&d.data.length>0)return d}},c=function(e,t,n){var r,i,a=t.parentNode;if(o.isChildOfBody(e,t)&&o.isChildOfBody(e,n)){if(o.isListNode(n.lastChild)&&(i=n.lastChild),a===n.lastChild&&o.isBr(a.previousSibling)&&e.remove(a.previousSibling),r=n.lastChild,r&&o.isBr(r)&&t.hasChildNodes()&&e.remove(r),o.isEmpty(e,n,!0)&&e.$(n).empty(),!o.isEmpty(e,t,!0))for(;r=t.firstChild;)n.appendChild(r);i&&n.appendChild(i),e.remove(t),o.isEmpty(e,a)&&a!==e.getRoot()&&e.remove(a)}},f=function(e,t){var n,a,d,f=e.dom,u=e.selection,m=f.getParent(u.getStart(),"LI");if(m){if((n=m.parentNode)===e.getBody()&&o.isEmpty(f,n))return!0;if(a=s.normalizeRange(u.getRng(!0)),(d=f.getParent(l(e,a,t),"LI"))&&d!==m){var p=i.createBookmark(a);return t?c(f,d,m):c(f,m,d),e.selection.setRng(i.resolveBookmark(p)),!0}if(!d&&!t&&r.removeList(e,n.nodeName))return!0}return!1},u=function(e,t){var n=e.dom,i=n.getParent(e.selection.getStart(),n.isBlock);if(i&&n.isEmpty(i)){var o=s.normalizeRange(e.selection.getRng(!0)),a=n.getParent(l(e,o,t),"LI");if(a)return e.undoManager.transact(function(){n.remove(i),r.mergeWithAdjacentLists(n,a.parentNode),e.selection.select(a,!0),e.selection.collapse(t)}),!0}return!1},m=function(e,t){return f(e,t)||u(e,t)},p=function(e){return!!(e.dom.getParent(e.selection.getStart(),"LI,DT,DD")||d.getSelectedListItems(e).length>0)&&(e.undoManager.transact(function(){e.execCommand("Delete"),a.normalizeLists(e.dom,e.getBody())}),!0)},g=function(e,t){return e.selection.isCollapsed()?m(e,t):p(e)};return{setup:function(e){e.on("keydown",function(t){t.keyCode===n.BACKSPACE?g(e,!1)&&t.preventDefault():t.keyCode===n.DELETE&&g(e,!0)&&t.preventDefault()})},backspaceDelete:g}}),o("0",["1","2","3","4","5","6","7","8"],function(e,t,n,r,i,o,a,s){var d=function(e,t){return function(){var n=e.dom.getParent(e.selection.getStart(),"UL,OL,DL");return n&&n.nodeName===t}},l=function(e){e.on("BeforeExecCommand",function(t){var n,o=t.command.toLowerCase();if("indent"===o?r.indentSelection(e)&&(n=!0):"outdent"===o&&i.outdentSelection(e)&&(n=!0),n)return e.fire("ExecCommand",{command:t.command}),t.preventDefault(),!0}),e.addCommand("InsertUnorderedList",function(t,n){o.toggleList(e,"UL",n)}),e.addCommand("InsertOrderedList",function(t,n){o.toggleList(e,"OL",n)}),e.addCommand("InsertDefinitionList",function(t,n){o.toggleList(e,"DL",n)})},c=function(e){e.addQueryStateHandler("InsertUnorderedList",d(e,"UL")),e.addQueryStateHandler("InsertOrderedList",d(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",d(e,"DL"))},f=function(e){e.on("keydown",function(t){9!==t.keyCode||n.metaKeyPressed(t)||e.dom.getParent(e.selection.getStart(),"LI,DT,DD")&&(t.preventDefault(),t.shiftKey?i.outdentSelection(e):r.indentSelection(e))})},u=function(e){var n=function(n){return function(){var r=this;e.on("NodeChange",function(e){var i=t.grep(e.parents,s.isListNode);r.active(i.length>0&&i[0].nodeName===n)})}};(function(e,n){var r=e.settings.plugins?e.settings.plugins:"";return-1!==t.inArray(r.split(/[ ,]/),n)})(e,"advlist")||(e.addButton("numlist",{title:"Numbered list",cmd:"InsertOrderedList",onPostRender:n("OL")}),e.addButton("bullist",{title:"Bullet list",cmd:"InsertUnorderedList",onPostRender:n("UL")})),e.addButton("indent",{icon:"indent",title:"Increase indent",cmd:"Indent",onPostRender:function(t){var n=t.control;e.on("nodechange",function(){for(var t=e.selection.getSelectedBlocks(),r=!1,i=0,o=t.length;!r&&i<o;i++){var a=t[i].nodeName;r="LI"===a&&s.isFirstChild(t[i])||"UL"===a||"OL"===a||"DD"===a}n.disabled(r)})}})};return e.add("lists",function(e){return u(e),a.setup(e),e.on("init",function(){l(e),c(e),e.getParam("lists_indent_on_tab",!0)&&f(e)}),{backspaceDelete:function(t){a.backspaceDelete(e,t)}}}),function(){}}),r("0")()}();